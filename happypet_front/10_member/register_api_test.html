<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="../js/jquery-3.7.1.js"></script>
</head>
<body>
    <div style="background-color: aqua; ">
        <img src="../img/LOGO.png" width="150px">
        <div id="rabbit"></div>
    </div>
    <div class="row p-2">
        <div class="col-6" style="background-color: pink; height: 200px;">
            <br>
            <label for="">帳號</label>
            <input id="uid" type="text"> 
            <br>
            <br>
            <label for="">姓名</label>
            <input id="name" type="text">
            <br>
            <br>
            <button id="btnALL">查詢</button>
            <button id="btnOne">查一個人</button>
            <button id="btnInsert">新增</button>
        </div>
        <div id="result" class="col-6" style="background-color: palegoldenrod;"></div>
    </div>


    <script>
        btnALL.onclick = function(){
            $.ajax({
                url:`http://localhost/happytest/GetAllUser`,
                method:'GET'
            }).done(function(mydata){
                console.log('1. done:', mydata);
                result.innerHTML = '';
                // rabbit.innerHTML = '';

                for (let k = 0; k < mydata.length; k++) {

                    // 使用者資料變成字串放到畫面上
                    result.innerHTML += 
                    mydata[k].uid + "-------" + 
                    mydata[k].name + "<br>"
                    
                }
            }).fail(function(cat){
                console.log('2. fail:', cat);
            }).always(function(){
                console.log('3. always: 咖波');
            })
        }

        
        btnInsert.onclick = function(){
            $.ajax({
                url:`http://localhost/happytest/InsertUser`,
                method:'POST',
                data: {
                    uid:uid.value,
                    name:name.value
                }
            }).done(function(mydata){
                console.log('1. btnInsert-done:', mydata);
                result.innerHTML = mydata.message;
            }).fail(function(cat){
                console.log('2. btnInsert-fail:', cat);
            }).always(function(){
                console.log('3. btnInsert-always: 咖波');
            })
        }
    
    </script>
</body>
</html>